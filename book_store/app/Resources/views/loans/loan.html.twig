{% extends 'base.html.twig' %}


{% block body %}
    <h1>{{ customer.name }} {{ customer.firstname }} :: Loans</h1>

    {{ form_start(form) }}

    {% if form.available_books.vars.errors|length > 0 %}
        <div class="alert alert-danger" role="alert">Erreur lors de la soumission.</div>
    {% endif %}

    <div class="form-group">
        {{ form_widget(form.available_books, { 'attr': { 'class': 'form-control' } }) }}
    </div>

    <div class="form-group">
        <ul class="books">
            {% for book in customer.book %}
    {#{{ dump(book) }}#}
                <li>{{ book.name }}
                    <form method="post" action="{{ path('loan_delete', {'id': book.id}) }}">
                        <button type="submit">rendre</button>
                    </form>
                </li>
                    {# }}&emsp;<a href="#" class="text-danger">rendre</a></li>#}
            {% endfor %}
        </ul>
    </div>
    {{ form_end(form) }}
{% endblock %}

{% block javascripts %}
    <script>
        $(function () {
            $('select').first().on('change', function () {
                $(this).hide();
                $('form').submit();
            })
        })
    </script>
{% endblock %}